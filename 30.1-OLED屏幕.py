from machine import Pin, SoftI2C
from time import sleep
import ssd1306


# 创建i2c对象
i2c = SoftI2C(scl=Pin(22), sda=Pin(21))

# 宽度高度
oled_width = 128
oled_height = 64

# 创建oled屏幕对象
oled = ssd1306.SSD1306_I2C(oled_width, oled_height, i2c)

#fonts字典
fonts= {
    '项':
    [0x00, 0x01, 0x00, 0xfc, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x1d, 0xe0, 0x40, 0x01, 0x02,
    0x00, 0xfe, 0x20, 0x40, 0xfc, 0x04, 0x24, 0x24, 0x24, 0x24, 0x24, 0x44, 0x50, 0x88, 0x04, 0x02],  # 项
    
    '目':
    [0x00, 0x3f, 0x20, 0x20, 0x20, 0x3f, 0x20, 0x20, 0x20, 0x3f, 0x20, 0x20, 0x20, 0x20, 0x3f, 0x20,
     0x00, 0xf8, 0x08, 0x08, 0x08, 0xf8, 0x08, 0x08, 0x08, 0xf8, 0x08, 0x08, 0x08, 0x08, 0xf8, 0x08],  # 目
    
    '网':
    [0x00, 0x7f, 0x40, 0x40, 0x42, 0x52, 0x4a, 0x44, 0x44, 0x4a, 0x4a, 0x52, 0x61, 0x40, 0x40, 0x40,
     0x00, 0xfc, 0x04, 0x04, 0x14, 0x94, 0x54, 0x24, 0x24, 0x54, 0x54, 0x94, 0x04, 0x04, 0x14, 0x08],  # 网
}


#函数部分
def chinese(ch_str, x_axis, y_axis): 
   offset_ = 0 
   for k in ch_str: 
       #code = 0x00  # 将中文转成16进制编码
       byte_data = fonts[k]
       #data_code = k.encode("utf-8")
       #code |= data_code[0] << 16
       #code |= data_code[1] << 8
       #code |= data_code[2]
       for y in range(0, 16):
           a_ = bin(byte_data[y]).replace('0b', '')
           while len(a_) < 8:
               a_ = '0'+ a_
           b_ = bin(byte_data[y+16]).replace('0b', '')
           while len(b_) < 8:
               b_ = '0'+ b_
           for x in range(0, 8):
               oled.pixel(x_axis + offset_ + x,    y+y_axis, int(a_[x]))   
               oled.pixel(x_axis + offset_ + x +8, y+y_axis, int(b_[x]))   
       offset_ += 16

# 在指定位置处显示文字
oled.text('Hello!', 0, 0)
oled.text('Hello, World 2!', 0, 10)
oled.text('Hello, World 3!', 0, 20)
chinese('项目网',40,30)

oled.show()


